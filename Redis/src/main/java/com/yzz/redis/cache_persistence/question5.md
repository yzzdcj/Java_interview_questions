####【考核题目】：
    针对 “亿级流量购物车系统”，设计 Redis 的 持久化策略（RDB + AOF）。

###【业务背景】：
    我们正在开发一个大型电商平台的 “购物车” 服务。

    数据特征：购物车数据读写极高（QPS 5万+），且数据变更频繁（加购、减购、删除）。

    存储架构：为了高性能，我们将购物车数据全量存储在 Redis 中（不查 DB，或者异步落库，Redis 是主存储）。

    事故痛点：

        上次 Redis 宕机，重启花了 20 分钟（因为 AOF 文件太大，回放太慢），导致这 20 分钟内用户无法下单，损失惨重。

        或者：上次为了重启快，只开了 RDB，结果丢了 10 分钟的数据，大量用户投诉“我刚放进去的商品怎么没了？”。

####【具体需求】：

    请你作为架构师，修改 redis.conf 配置文件，给出满足以下要求的持久化方案：

    方案一：优化 AOF 配置 (保证数据不丢)

        需求：我们允许最多丢失 1 秒钟 的数据，但绝不能容忍丢失几分钟。
        
        问题：请设置 appendfsync 的策略。并解释为什么不选 always？
        
        问题：随着时间推移，AOF 文件会无限膨胀（几百 GB）。请开启 AOF 重写 (Rewrite) 功能，并解释它是如何“瘦身”的？

    方案二：Redis 4.0/5.0+ 混合持久化 (企业级标准)

        需求：我们要结合 RDB 的启动快和 AOF 的数据全。
        
        问题：请开启 混合持久化 (Hybrid Persistence)。
        
        原理：请简述开启后，AOF 文件里的内容结构变成了什么样？（这是区分初级和高级的关键）。

####请提供：

    关键的 redis.conf 配置项（键值对形式）。

    简短解释：混合持久化开启后，重启 Redis 时加载数据的流程是怎样的？

#####💡 提示（解题思路）
    纯 RDB：丢数据多。

    纯 AOF：恢复慢。

    混合持久化：RDB 镜像 + AOF 增量日志。